(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[363],{2886:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions",function(){return r(1e3)}])},7964:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(4848),n=r(6540);let a=e=>{let{onAddTransaction:t}=e,[r,a]=(0,n.useState)(""),[i,l]=(0,n.useState)(0),[c,o]=(0,n.useState)("income"),[d,u]=(0,n.useState)(new Date().toISOString().split("T")[0]),m=e=>parseInt(e.replace(/\D/g,"")).toLocaleString("id-ID");return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=sessionStorage.getItem("userId");if(!s){console.error("User ID is not available in sessionStorage");return}t({transactionId:"".concat(s,"-").concat(Date.now()),userId:s,description:r,amount:i,type:c,date:d,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(""),l(0),o("income"),u(new Date().toISOString().split("T")[0])},className:"flex gap-6 items-center",children:[(0,s.jsxs)("div",{className:"mb-4 flex-1",children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description"}),(0,s.jsx)("input",{id:"description",type:"text",value:r,onChange:e=>a(e.target.value),className:"border p-2 w-full",required:!0})]}),(0,s.jsxs)("div",{className:"mb-4 flex-1",children:[(0,s.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium",children:"Amount"}),(0,s.jsx)("input",{id:"amount",type:"text",value:m(i.toString()),onChange:e=>{let t=e.target.value.replace(/\D/g,""),r=m(t);l(parseInt(t)),e.target.value=r},className:"border p-2 w-full",required:!0,placeholder:"0"})]}),(0,s.jsxs)("div",{className:"mb-4 flex-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",id:"income",name:"type",value:"income",checked:"income"===c,onChange:()=>o("income"),className:"mr-2"}),(0,s.jsx)("label",{htmlFor:"income",children:"Income"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"radio",id:"expense",name:"type",value:"expense",checked:"expense"===c,onChange:()=>o("expense"),className:"mr-2"}),(0,s.jsx)("label",{htmlFor:"expense",children:"Expense"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4 flex-1",children:[(0,s.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium",children:"Date"}),(0,s.jsx)("input",{id:"date",type:"date",value:d,onChange:e=>u(e.target.value),className:"border p-2 w-full"})]}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg  w-[200px] ",children:"Add"})]})}},1550:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(4848),n=r(6540),a=r(6715),i=r(1106),l=r.n(i),c=r(7037);let o=e=>{let{isOpen:t,setIsOpen:r}=e,n=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"bg-gray-800 text-white h-screen p-6 fixed top-0 left-0 transition-all duration-300 ".concat(t?"w-64":"w-20"),children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsx)("button",{onClick:()=>{r(!t)},className:"text-white focus:outline-none focus:ring-2 focus:ring-gray-400",children:(0,s.jsx)(c.OXb,{size:20})})}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"mb-4",title:"Dashboard",children:(0,s.jsx)(l(),{href:"/dashboard",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,s.jsx)(c.$BV,{size:20}),t&&(0,s.jsx)("span",{children:"Dashboard"})]})})}),(0,s.jsx)("li",{className:"mb-4",title:"Transaksi",children:(0,s.jsx)(l(),{href:"/transactions",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,s.jsx)(c.yk7,{size:20}),t&&(0,s.jsx)("span",{children:"Transaksi"})]})})}),(0,s.jsx)("li",{className:"mb-4",title:"Pengaturan",children:(0,s.jsx)(l(),{href:"/settings",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,s.jsx)(c.C8d,{size:20}),t&&(0,s.jsx)("span",{children:"Pengaturan"})]})})})]}),t&&(0,s.jsx)("div",{className:"mt-auto",children:(0,s.jsx)("button",{onClick:()=>{sessionStorage.removeItem("authToken"),n.push("/login")},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400",children:"Logout"})})]})},d=e=>{let{children:t}=e,[r,a]=(0,n.useState)(!0);return(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(o,{isOpen:r,setIsOpen:a}),(0,s.jsx)("main",{className:"flex-1 p-6 bg-gray-50 transition-all duration-300 ".concat(r?"ml-64":"ml-20"),children:t})]})}},1e3:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(4848),n=r(6540),a=r(1550),i=r(7964);let l=()=>{let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=sessionStorage.getItem("userId");if(!e){l("User ID is not available in sessionStorage");return}(async()=>{try{let r=await fetch("/api/transaction?userId=".concat(e)),s=await r.json();Array.isArray(s)&&t(s)}catch(e){l("Error fetching transactions: "+e.message)}})()},[]);let c=async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{(await fetch("/api/transaction?transactionId=".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?t(t=>t.filter(t=>t.transactionId!==e)):l("Failed to delete the transaction")}catch(e){l("Error deleting transaction: "+e.message)}},o=async e=>{let r=sessionStorage.getItem("userId")||"",s={...e,userId:r};try{let e=await fetch("/api/transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(e.ok){let r=await e.json();t(e=>[...e,r])}else l("Failed to add transaction: "+(await e.json()).message)}catch(e){l("Error creating transaction: "+e.message)}},d=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e);return(0,s.jsx)(a.A,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Manage Transactions"}),r&&(0,s.jsx)("div",{className:"text-red-500 mb-4",children:r}),(0,s.jsx)(i.A,{onAddTransaction:o}),(0,s.jsxs)("div",{className:"transactions-list mt-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Transactions"}),(0,s.jsxs)("table",{className:"table-auto w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"border p-2",children:"Type"}),(0,s.jsx)("th",{className:"border p-2",children:"Amount"}),(0,s.jsx)("th",{className:"border p-2",children:"Description"}),(0,s.jsx)("th",{className:"border p-2",children:"Date"}),(0,s.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"income"===e.type?"bg-green-100":"bg-red-100",children:[(0,s.jsx)("td",{className:"border p-2",children:e.type}),(0,s.jsx)("td",{className:"border p-2",children:d(e.amount)}),(0,s.jsx)("td",{className:"border p-2",children:e.description}),(0,s.jsx)("td",{className:"border p-2",children:new Date(e.date).toLocaleDateString()}),(0,s.jsx)("td",{className:"border p-2",children:(0,s.jsx)("button",{onClick:()=>c(e.transactionId),className:"bg-red-500 text-white p-1 rounded",children:"Delete"})})]},e.transactionId))})]})]})]})})}},6715:(e,t,r)=>{e.exports=r(8440)},5787:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(6540),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=s.createContext&&s.createContext(n),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var s,n;s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,l({attr:o({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,o({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:n,size:a,title:c}=e,d=function(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,i),u=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,d,{className:r,style:o(o({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==a?s.createElement(a.Consumer,null,e=>t(e)):t(n)}}},e=>{var t=t=>e(e.s=t);e.O(0,[563,106,636,593,792],()=>t(2886)),_N_E=e.O()}]);
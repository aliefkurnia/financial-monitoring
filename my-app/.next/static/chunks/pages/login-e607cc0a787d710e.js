(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{7864:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(4156)}])},6537:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(4848),l=a(6540);let r=e=>{let{isOpen:s,onClose:a,onRegisterSuccess:r,onRegisterError:n}=e,[i,d]=(0,l.useState)({username:"",email:"",password:""}),[o,c]=(0,l.useState)(""),[u,m]=(0,l.useState)(!1),h=e=>{let{name:s,value:a}=e.target;d({...i,[s]:a})},x=async e=>{e.preventDefault(),m(!0),c("");try{let e=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(e.ok)r(),a();else{let s=(await e.json()).message||"Terjadi kesalahan, coba lagi.";c(s),n(s)}}catch(e){console.log(e),c("Terjadi kesalahan saat menghubungi server."),n("Terjadi kesalahan saat menghubungi server.")}finally{m(!1)}};return s?(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex justify-center items-center z-50",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register"}),(0,t.jsxs)("form",{onSubmit:x,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-lg",children:"Username"}),(0,t.jsx)("input",{type:"text",id:"username",name:"username",value:i.username,onChange:h,className:"w-full px-4 py-2 border rounded-md mb-4",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-lg",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:i.email,onChange:h,className:"w-full px-4 py-2 border rounded-md mb-4",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-lg",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:i.password,onChange:h,className:"w-full px-4 py-2 border rounded-md mb-4",required:!0})]}),o&&(0,t.jsx)("p",{className:"text-red-500",children:o}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg mt-4",disabled:u,children:u?"Mendaftar...":"Daftar"})]}),(0,t.jsx)("button",{className:"absolute top-2 right-2 text-gray-600",onClick:a,children:"X"})]})}):null}},4156:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>i});var t=a(4848),l=a(6540),r=a(6537),n=a(6715);let i=()=>{let[e,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(""),d=(0,n.useRouter)(),o=()=>{s(!e)},c=async e=>{e.preventDefault();let s=e.target.email.value,a=e.target.password.value;try{let e=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:a})});if(e.ok){let s=await e.json();s.token&&s.userId?(sessionStorage.setItem("authToken",s.token),sessionStorage.setItem("userId",s.userId),i("Login berhasil!"),d.push("/dashboard")):i("Response API tidak mengandung userId atau token.")}else{let s=await e.json();i("Error: ".concat(s.message))}}catch(e){i("Terjadi kesalahan saat login.")}};return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-6",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Login"}),(0,t.jsxs)("form",{onSubmit:c,className:"w-full max-w-md space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-lg",children:"Email"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",className:"w-full px-4 py-2 border rounded-md",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-lg",children:"Password"}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",className:"w-full px-4 py-2 border rounded-md",required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-lg",children:"Login"})]}),a&&(0,t.jsx)("div",{className:"mt-4 text-center text-lg ".concat(a.includes("berhasil")?"text-green-500":"text-red-500"),children:a}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Belum punya akun?"," ",(0,t.jsx)("button",{onClick:o,className:"text-blue-600 hover:text-blue-800",children:"Daftar di sini"})]})}),(0,t.jsx)(r.default,{isOpen:e,onClose:o,onRegisterSuccess:()=>{i("Registrasi berhasil! Silakan login."),o()},onRegisterError:e=>{i("Error: ".concat(e))}})]})}},6715:(e,s,a)=>{e.exports=a(8440)}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(7864)),_N_E=e.O()}]);
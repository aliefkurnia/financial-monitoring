(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{7100:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(9217)}])},7964:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(4848),n=s(6540);let l=e=>{let{onAddTransaction:t}=e,[s,l]=(0,n.useState)(""),[r,i]=(0,n.useState)(0),[o,d]=(0,n.useState)("income"),[c,m]=(0,n.useState)(new Date().toISOString().split("T")[0]),x=e=>parseInt(e.replace(/\D/g,"")).toLocaleString("id-ID");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=sessionStorage.getItem("userId");if(!a){console.error("User ID is not available in sessionStorage");return}t({transactionId:"".concat(a,"-").concat(Date.now()),userId:a,description:s,amount:r,type:o,date:c,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),l(""),i(0),d("income"),m(new Date().toISOString().split("T")[0])},className:"flex gap-6 items-center",children:[(0,a.jsxs)("div",{className:"mb-4 flex-1",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description"}),(0,a.jsx)("input",{id:"description",type:"text",value:s,onChange:e=>l(e.target.value),className:"border p-2 w-full",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4 flex-1",children:[(0,a.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium",children:"Amount"}),(0,a.jsx)("input",{id:"amount",type:"text",value:x(r.toString()),onChange:e=>{let t=e.target.value.replace(/\D/g,""),s=x(t);i(parseInt(t)),e.target.value=s},className:"border p-2 w-full",required:!0,placeholder:"0"})]}),(0,a.jsxs)("div",{className:"mb-4 flex-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",id:"income",name:"type",value:"income",checked:"income"===o,onChange:()=>d("income"),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"income",children:"Income"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"radio",id:"expense",name:"type",value:"expense",checked:"expense"===o,onChange:()=>d("expense"),className:"mr-2"}),(0,a.jsx)("label",{htmlFor:"expense",children:"Expense"})]})]})]}),(0,a.jsxs)("div",{className:"mb-4 flex-1",children:[(0,a.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium",children:"Date"}),(0,a.jsx)("input",{id:"date",type:"date",value:c,onChange:e=>m(e.target.value),className:"border p-2 w-full"})]}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg  w-[200px] ",children:"Add"})]})}},1550:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(4848),n=s(6540),l=s(6715),r=s(1106),i=s.n(r),o=s(7037);let d=e=>{let{isOpen:t,setIsOpen:s}=e,n=(0,l.useRouter)();return(0,a.jsxs)("div",{className:"bg-gray-800 text-white h-screen p-6 fixed top-0 left-0 transition-all duration-300 ".concat(t?"w-64":"w-20"),children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,a.jsx)("button",{onClick:()=>{s(!t)},className:"text-white focus:outline-none focus:ring-2 focus:ring-gray-400",children:(0,a.jsx)(o.OXb,{size:20})})}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{className:"mb-4",title:"Dashboard",children:(0,a.jsx)(i(),{href:"/dashboard",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,a.jsx)(o.$BV,{size:20}),t&&(0,a.jsx)("span",{children:"Dashboard"})]})})}),(0,a.jsx)("li",{className:"mb-4",title:"Transaksi",children:(0,a.jsx)(i(),{href:"/transactions",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,a.jsx)(o.yk7,{size:20}),t&&(0,a.jsx)("span",{children:"Transaksi"})]})})}),(0,a.jsx)("li",{className:"mb-4",title:"Pengaturan",children:(0,a.jsx)(i(),{href:"/settings",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,a.jsx)(o.C8d,{size:20}),t&&(0,a.jsx)("span",{children:"Pengaturan"})]})})})]}),t&&(0,a.jsx)("div",{className:"mt-auto",children:(0,a.jsx)("button",{onClick:()=>{sessionStorage.removeItem("authToken"),n.push("/login")},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400",children:"Logout"})})]})},c=e=>{let{children:t}=e,[s,l]=(0,n.useState)(!0);return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(d,{isOpen:s,setIsOpen:l}),(0,a.jsx)("main",{className:"flex-1 p-6 bg-gray-50 transition-all duration-300 ".concat(s?"ml-64":"ml-20"),children:t})]})}},9217:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(4848),n=s(6540),l=s(1550);let r=e=>{let{transactions:t}=e,[s,l]=(0,n.useState)(0),[r,i]=(0,n.useState)(0),[o,d]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=new Date().getMonth(),s=new Date().getFullYear(),a=t.filter(t=>{let a=new Date(t.date);return a.getMonth()===e&&a.getFullYear()===s}),n=a.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),r=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);l(n),i(r),d(n-r)},[t]),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Monthly Summary"}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Total Income"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-green-700",children:["Rp ",s.toLocaleString()]})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Total Expense"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-red-700",children:["Rp ",r.toLocaleString()]})]})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg shadow",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Balance"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-blue-700",children:["Rp ",o.toLocaleString()]})]})})]}),(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4 mt-8",children:"5 Recent Transactions"}),(0,a.jsx)("div",{className:"flex space-x-4 overflow-x-auto pb-4",children:t.slice(0,5).reverse().map(e=>(0,a.jsxs)("div",{className:"".concat("income"===e.type?"bg-green-100 border-green-100":"bg-red-100 border-red-100"," bg-opacity-80 p-4 rounded-lg shadow flex-1 min-w-[300px] border-2"),children:[(0,a.jsx)("h3",{className:"text-xl font-semibold",children:"income"===e.type?"Income":"Expense"}),(0,a.jsx)("p",{className:"text-lg",children:e.description}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)("p",{className:"text-lg font-bold ".concat("income"===e.type?"text-green-700":"text-red-700"),children:["Rp ",e.amount.toLocaleString()]})]},e.transactionId))})]})};var i=s(949),o=s(4776),d=s(7323),c=s(1672),m=s(3087),x=s(5466),h=s(1191),u=s(2906);let g=e=>{let t=new Date(e);return"".concat(t.getFullYear(),"-").concat((t.getMonth()+1).toString().padStart(2,"0"))},p=e=>{let t={};return e.forEach(e=>{let{date:s,amount:a}=e,n=g(s);t[n]||(t[n]=0),t[n]+=a}),t},j=()=>{let e=[],t=new Date;for(let s=11;s>=0;s--){let a=new Date(t);a.setMonth(a.getMonth()-s),e.push(g(a.toISOString()))}return e},b=e=>{let{incomeData:t,expenseData:s}=e;if(0===t.length&&0===s.length)return(0,a.jsx)("p",{children:"No data available to display the chart."});let n=p(t),l=p(s),r=j().map(e=>({date:e,income:n[e]||0,expense:l[e]||0}));return r.sort((e,t)=>e.date>t.date?1:-1),(0,a.jsx)(i.u,{width:"100%",height:400,children:(0,a.jsxs)(o.E,{data:r,children:[(0,a.jsx)(d.d,{strokeDasharray:"3 3"}),(0,a.jsx)(c.W,{dataKey:"date"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(x.m,{}),(0,a.jsx)(h.s,{}),(0,a.jsx)(u.y,{dataKey:"income",fill:"darkblue"}),(0,a.jsx)(u.y,{dataKey:"expense",fill:"red"})]})})},f=e=>{let{savings:t}=e;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Savings Prediction"}),(0,a.jsxs)("p",{children:["Your savings for the next month are estimated to be around $",t,"."]})]})};var N=s(7964);let v=()=>{let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)(0),[o,d]=(0,n.useState)(0),[c,m]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{m(!0);let e=sessionStorage.getItem("userId");if(!e){h("User ID is missing in session storage");return}let s=await fetch("/api/transaction?userId=".concat(e));if(!s.ok){await s.text();return}let a=await s.json();if(t(a),a.length>0){let e=a.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),t=a.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);i(e),d(t)}}catch(e){console.error("Error fetching data:",e),h("Gagal memuat data transaksi! Coba lagi nanti.")}finally{m(!1)}})()},[]);let u=async e=>{let s=sessionStorage.getItem("userId");if(!s){console.error("User ID is missing in session storage");return}let a={...e,userId:s};try{let e=await fetch("/api/transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("Gagal menambahkan transaksi");let s=await e.json();t(e=>[...e,s]),i(e=>e+("income"===s.type?s.amount:0)),d(e=>e+("expense"===s.type?s.amount:0)),console.log("Transaction successfully added:",s)}catch(e){console.error("Error adding transaction:",e),h("Terjadi kesalahan saat menambahkan transaksi")}};return c?(0,a.jsx)("p",{children:"Loading..."}):(0,a.jsxs)(l.A,{children:[x&&(0,a.jsx)("p",{className:"text-red-500",children:x}),0===e.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"No transactions found. Please add a transaction below:"}),(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:(0,a.jsx)(N.A,{onAddTransaction:u})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Grafik Pemasukan dan Pengeluaran"}),(0,a.jsx)(b,{incomeData:e.filter(e=>"income"===e.type),expenseData:e.filter(e=>"expense"===e.type)})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(r,{transactions:e})}),(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:(0,a.jsx)(N.A,{onAddTransaction:u})}),(0,a.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"Prediksi Tabungan"}),(0,a.jsx)(f,{savings:500})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[563,106,510,636,593,792],()=>t(7100)),_N_E=e.O()}]);
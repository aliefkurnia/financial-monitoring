(()=>{var e={};e.id=363,e.ids=[220,363,636],e.modules={1625:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>f,default:()=>p,getServerSideProps:()=>j,getStaticPaths:()=>b,getStaticProps:()=>g,reportWebVitals:()=>v,routeModule:()=>D,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>I,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>N});var r={};s.r(r),s.d(r,{default:()=>h});var a=s(3865),n=s(9455),i=s(671),l=s(781),c=s.n(l),o=s(7954),d=s(8732),u=s(2015),m=s(7356),x=s(7327);let h=()=>{let[e,t]=(0,u.useState)([]),[s,r]=(0,u.useState)(null);(0,u.useEffect)(()=>{let e=sessionStorage.getItem("userId");if(!e){r("User ID is not available in sessionStorage");return}(async()=>{try{let s=await fetch(`/api/transaction?userId=${e}`),r=await s.json();Array.isArray(r)&&t(r)}catch(e){r("Error fetching transactions: "+e.message)}})()},[]);let a=async e=>{if(window.confirm("Are you sure you want to delete this transaction?"))try{(await fetch(`/api/transaction?transactionId=${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok?t(t=>t.filter(t=>t.transactionId!==e)):r("Failed to delete the transaction")}catch(e){r("Error deleting transaction: "+e.message)}},n=async e=>{let s=sessionStorage.getItem("userId")||"",a={...e,userId:s};try{let e=await fetch("/api/transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(e.ok){let s=await e.json();t(e=>[...e,s])}else r("Failed to add transaction: "+(await e.json()).message)}catch(e){r("Error creating transaction: "+e.message)}},i=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e);return(0,d.jsx)(m.A,{children:(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Manage Transactions"}),s&&(0,d.jsx)("div",{className:"text-red-500 mb-4",children:s}),(0,d.jsx)(x.A,{onAddTransaction:n}),(0,d.jsxs)("div",{className:"transactions-list mt-6",children:[(0,d.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Transactions"}),(0,d.jsxs)("table",{className:"table-auto w-full border-collapse",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{className:"bg-gray-100",children:[(0,d.jsx)("th",{className:"border p-2",children:"Type"}),(0,d.jsx)("th",{className:"border p-2",children:"Amount"}),(0,d.jsx)("th",{className:"border p-2",children:"Description"}),(0,d.jsx)("th",{className:"border p-2",children:"Date"}),(0,d.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:e.map(e=>(0,d.jsxs)("tr",{className:"income"===e.type?"bg-green-100":"bg-red-100",children:[(0,d.jsx)("td",{className:"border p-2",children:e.type}),(0,d.jsx)("td",{className:"border p-2",children:i(e.amount)}),(0,d.jsx)("td",{className:"border p-2",children:e.description}),(0,d.jsx)("td",{className:"border p-2",children:new Date(e.date).toLocaleDateString()}),(0,d.jsx)("td",{className:"border p-2",children:(0,d.jsx)("button",{onClick:()=>a(e.transactionId),className:"bg-red-500 text-white p-1 rounded",children:"Delete"})})]},e.transactionId))})]})]})]})})},p=(0,i.M)(r,"default"),g=(0,i.M)(r,"getStaticProps"),b=(0,i.M)(r,"getStaticPaths"),j=(0,i.M)(r,"getServerSideProps"),f=(0,i.M)(r,"config"),v=(0,i.M)(r,"reportWebVitals"),N=(0,i.M)(r,"unstable_getStaticProps"),S=(0,i.M)(r,"unstable_getStaticPaths"),y=(0,i.M)(r,"unstable_getStaticParams"),w=(0,i.M)(r,"unstable_getServerProps"),I=(0,i.M)(r,"unstable_getServerSideProps"),D=new a.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/transactions",pathname:"/transactions",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:r})},7327:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(8732),a=s(2015);let n=({onAddTransaction:e})=>{let[t,s]=(0,a.useState)(""),[n,i]=(0,a.useState)(0),[l,c]=(0,a.useState)("income"),[o,d]=(0,a.useState)(new Date().toISOString().split("T")[0]),u=e=>parseInt(e.replace(/\D/g,"")).toLocaleString("id-ID");return(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault();let a=sessionStorage.getItem("userId");if(!a){console.error("User ID is not available in sessionStorage");return}e({transactionId:`${a}-${Date.now()}`,userId:a,description:t,amount:n,type:l,date:o,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),s(""),i(0),c("income"),d(new Date().toISOString().split("T")[0])},className:"flex gap-6 items-center",children:[(0,r.jsxs)("div",{className:"mb-4 flex-1",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description"}),(0,r.jsx)("input",{id:"description",type:"text",value:t,onChange:e=>s(e.target.value),className:"border p-2 w-full",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4 flex-1",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium",children:"Amount"}),(0,r.jsx)("input",{id:"amount",type:"text",value:u(n.toString()),onChange:e=>{let t=e.target.value.replace(/\D/g,""),s=u(t);i(parseInt(t)),e.target.value=s},className:"border p-2 w-full",required:!0,placeholder:"0"})]}),(0,r.jsxs)("div",{className:"mb-4 flex-1",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,r.jsxs)("div",{className:"flex gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"income",name:"type",value:"income",checked:"income"===l,onChange:()=>c("income"),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"income",children:"Income"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"radio",id:"expense",name:"type",value:"expense",checked:"expense"===l,onChange:()=>c("expense"),className:"mr-2"}),(0,r.jsx)("label",{htmlFor:"expense",children:"Expense"})]})]})]}),(0,r.jsxs)("div",{className:"mb-4 flex-1",children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium",children:"Date"}),(0,r.jsx)("input",{id:"date",type:"date",value:o,onChange:e=>d(e.target.value),className:"border p-2 w-full"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg  w-[200px] ",children:"Add"})]})}},7356:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(8732),a=s(2015),n=s(6715),i=s(1106),l=s.n(i),c=s(2782);let o=({isOpen:e,setIsOpen:t})=>{let s=(0,n.useRouter)();return(0,r.jsxs)("div",{className:`bg-gray-800 text-white h-screen p-6 fixed top-0 left-0 transition-all duration-300 ${e?"w-64":"w-20"}`,children:[(0,r.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,r.jsx)("button",{onClick:()=>{t(!e)},className:"text-white focus:outline-none focus:ring-2 focus:ring-gray-400",children:(0,r.jsx)(c.OXb,{size:20})})}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{className:"mb-4",title:"Dashboard",children:(0,r.jsx)(l(),{href:"/dashboard",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,r.jsx)(c.$BV,{size:20}),e&&(0,r.jsx)("span",{children:"Dashboard"})]})})}),(0,r.jsx)("li",{className:"mb-4",title:"Transaksi",children:(0,r.jsx)(l(),{href:"/transactions",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,r.jsx)(c.yk7,{size:20}),e&&(0,r.jsx)("span",{children:"Transaksi"})]})})}),(0,r.jsx)("li",{className:"mb-4",title:"Pengaturan",children:(0,r.jsx)(l(),{href:"/settings",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4 cursor-pointer hover:underline",children:[(0,r.jsx)(c.C8d,{size:20}),e&&(0,r.jsx)("span",{children:"Pengaturan"})]})})})]}),e&&(0,r.jsx)("div",{className:"mt-auto",children:(0,r.jsx)("button",{onClick:()=>{sessionStorage.removeItem("authToken"),s.push("/login")},className:"w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-400",children:"Logout"})})]})},d=({children:e})=>{let[t,s]=(0,a.useState)(!0);return(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(o,{isOpen:t,setIsOpen:s}),(0,r.jsx)("main",{className:`flex-1 p-6 bg-gray-50 transition-all duration-300 ${t?"ml-64":"ml-20"}`,children:e})]})}},7954:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(8732);s(9361);let a=function({Component:e,pageProps:t}){return(0,r.jsx)("div",{className:"bg-gray-50 min-h-screen",children:(0,r.jsx)(e,{...t})})}},9361:()=>{},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},4075:e=>{"use strict";e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[781,193,715,106,782],()=>s(1625));module.exports=r})();